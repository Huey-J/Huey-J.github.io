---
title: AWS ELB
author: Huey-J
date: 2021-06-16 12:00:00 +0800
categories: [데브옵스]
tags: [AWS]
---

# Elastic Load Balancer

AWS에서 [Load Balancing](https://ko.wikipedia.org/wiki/부하분산)을 위해 제공하는 서비스이다.\
기본적인 로드밸런싱 기능 뿐만 아니라 부하 분산 대상에 대한 헬스 체크, 고정 세션, SSL 등의 기능을 수행한다.

# 종류

[//]: # (![aws load balancer type]&#40;/assets/img/aws_load_balancer_type.png&#41;)

ELB는 [OSI 7계층](https://ko.wikipedia.org/wiki/OSI_모형)에서 동작하는 위치에 따라 총 4개로 나뉜다.

> 자세한 비교는 [여기](https://aws.amazon.com/ko/elasticloadbalancing/features/#Product_comparisons)에서

## Application Load Balancer (ALB)

![aws load balancer type](/assets/img/aws_alb_diagram.svg)

- 7계층에 해당하는 Application Layer에서 동작
- 가장 일반적으로 사용됨 (웹 서버 기준)
- HTTP, HTTPS, WebSocket...

## Network Load Balancer (NLB)

![aws load balancer type](/assets/img/aws_nlb_diagram.svg)

- 4계층에 해당하는 Transport Layer에서 동작
- UDP를 사용하는 서버가 있다면 NLB를 고려해 보자
- TCP, UDP...

## Classic Load Balancer (CLB)

![aws load balancer type](/assets/img/aws_clb_diagram.svg)

- 4계층부터 7계층까지 적용 가능
- 가장 오래된, 기본적인 형태의 로드밸런서
- 현재는 없어지는 추세

## Gateway Load Balancer (GWLB)

![aws load balancer type](/assets/img/aws_gwlb_diagram.svg)

- 3계층에 해당하는 Network Layer에서 동작한
- 네트워크 트래픽이 애플리케이션으로 이동하기 전에 모든 트래픽을 검사하기 위해 사용
- 기존 3rd-party를 이용하여 방화벽을 구축하는 경우에 발생하는 운영 복잡도 증가 및 제약 사항에 대한 문제점들을 해결할 수 있다.
- 2020년 11월에 출시되어 가장 최근에 생긴 로드밸런서이다.



------------

# 간단한 동작 과정 (ALB)

실제로 사용자는 LB와 통신한다. 즉 프록시 서버라고 볼 수 있다.

1. 사용자와 ALB의 3-way handshake
2. ALB와 EC2 인스턴스의 3-way handshake
3. 사용자가 ALB에 요청을 보내면 ALB가 EC2에 전달

- 입력 포트는 리스너라고 정의하며 80포트(http)로 요청받는 경우 443(https)로 redirect시킬 수도 있다.
- LB는 여러 인스턴스로 구성된 대상 그룹으로 전달하게 된다.


# AWS-ACM

HTTPS 통신을 위해 AWS에서 제공하는 무료 SSL 인증서 발급 서비스이다.\
자동 갱신 기능이 있어 편리하다.\
인증서 발급을 위해선 유효한 도메인 주소가 있어야 한다. 즉 Route 53에 DNS서버가 등록되어 있어야 한다.


# References

로드 밸런서 유형 - [https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/userguide/what-is-load-balancing.html](https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/userguide/what-is-load-balancing.html)\
ELB - [https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/userguide/what-is-load-balancing.html](https://docs.aws.amazon.com/ko_kr/elasticloadbalancing/latest/userguide/what-is-load-balancing.html)
