---
title: 인프콘 2022 레거시 개편의 기술
author: Huey-J
date: 2022-10-05 12:00:00 +0800
categories: [데브옵스, AWS]
tags: [AWS, DevOps]
---

# 레거시 시스템

## 레거시 시스템이란

> wikipedia
> 레거시 시스템(legacy system)은 낡은 기술이나 방법론, 컴퓨터 시스템, 소프트웨어 등을 말한다. 이는 현대까지도 남아 쓰이는 기술을 부르는 말일 수도 있지만, 더 이상 쓰이지 않더라도 현대의 기술에 영향을 주는 경우도 포함한다.

- 개발 당시에는 많은 사람들이 선호하던 기술이 시간이 지나면서 비주류가 되는 경우
- 개발 당시에는 충분한 기술 스펙이었지만 현재의 기대 성능에는 부족한 경우
- 그 당시의 요구사항을 충분히 대응할 수 있었지만, 현 시점의 새로운 요구사항을 대응할 수 없는 경우

## 레거시 시스템을 개편하게 되는 경우

위 3가지 경우 모두 레거시 시스템 개편이 아닌 다른 선택지가 분명히 있다.
비주류 기술이 되었더라고 해당 기술을 가진 사람들을 계속 갈아 넣으면 되고, 성능이 부족하면 간단하게 하드웨어 스펙을 올리는 scale-out 방식을 사용해도 되고, 요구사항을 대응할 수 없다면 새로운 시스템을 만들 수 있기 떄문이다.

그렇다면 언제, 왜 레거시 시스템 개편을 하게 되는걸까?

답은 투자자본수익률(ROI)에 있다. 간단히 말하면 가성비라고도 불리는 ROI는 위의 방법 중 레거시 시스템 개편이라는 선택지가 먼 미래를 고려했을 때 더 훌륭할 때 실행된다.

해당 계산은 비단 개발자 뿐만 아니라 경영, 기획 등 다양한 직군과 함께 논의되어야 한다.

레거시 개편의 목적은 위의 여러 방법과 마찬가지로 서비스를 지속, 성장 시키기 위함이라 정의할 수 있다. 적절한 시기에 적절한 개편은 필연적이다.

유지보수하기 좋은 소프트웨어를 만들기 위함이다.


# 레거시 개편의 기술

## 1. 의존성을 한 방향으로 정리하라 (스파게티 코드 방지) (정돈된 의존성))

개발을 하다 보면 객체나 컴포넌트의 의존성이 스파게티처럼 복잡하게 꼬여있을 수 있는데 이러한 코드를 스파게티 코드라 한다.

이러한 코드의 문제는 문제가 발생했을 때 어떤 곳에서 문제가 발생했는지, 또는 수정했을 때 어떤 곳에서 문제가 발생할지 예측하기 힘들다는 점이다.

즉 코드를 수정하기 두려운 상황인 것이다.

이를 위해 가장 간단한 방법이 하나 있는데 의존성을 한 방향으로 정리하는 것이다.

![infcon spaghetti](/assets/img/infcon_spaghetti.png)
_Image Reference: infcon2022_

위의 그림과 같이 깊이를 나누지 않으면 스파게티 처럼 얽히기 쉽다. 하지만 아래의 이미지 처럼 깊이를 정의하고 '아래의 계층을 위 계층이 사용한다'라는 방향만 설정해 준다면 문제가 생겼을 때 또는 코드를 수정했을 때 확인해야 할 객체나 컴포넌트의 범위가 명확해지는 효과를 가질 수 있다.

![infcon flow dependency](/assets/img/infcon_flow_dependency.png)
_Image Reference: infcon2022_
![infcon flow dependency 2](/assets/img/infcon_flow_dependency_2.png)
_Image Reference: infcon2022_

## 2. 변경 대상에 대한 경계를 나눈다. (책임과 역할이 명확한 계층과 객체)

## 3. 테스트를 확보한다. (안정감)

## 4. 프로젝트 가시성 확보

## 부록. 도메인 이해 공유